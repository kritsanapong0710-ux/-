<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>LOMNUER ‚Äî Love Love Mystery Club</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@200;300;400;600&display=swap" rel="stylesheet">
<style>
:root {
    --primary: #ff2d55;
    --secondary: #7042f8;
    --accent: #00f2ff;
    --bg-dark: #0a0a0c;
    --glass: rgba(15, 15, 20, 0.85);
}

* { font-family: 'Prompt', sans-serif; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; width: 100%; margin: 0; background: #000; color: #fff; overflow: hidden; }

/* Transitions */
#fadeLayer { position: fixed; inset: 0; background: #000; z-index: 9999; pointer-events: none; opacity: 0; transition: opacity .8s; }
#narration { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 8000; display: none; align-items: center; justify-content: center; text-align: center; padding: 40px; }
.narr-text { font-size: 1.4rem; line-height: 1.8; font-weight: 300; animation: fadeUp 0.6s ease; }

/* Top UI HUD */
#topUI { position: fixed; top: 0; left: 0; width: 100%; z-index: 500; display: none; flex-direction: column; align-items: center; padding: 20px; pointer-events: none; }
#timeline { display: flex; gap: 10px; margin-bottom: 12px; }
.tl-step { background: rgba(0,0,0,0.6); padding: 6px 14px; border-radius: 20px; font-size: 0.75rem; border: 1px solid rgba(255,255,255,0.1); color: #888; }
.tl-step.active { background: var(--primary); color: #fff; border-color: #fff; box-shadow: 0 0 10px var(--primary); }
#globalStatus { display: flex; align-items: center; gap: 15px; pointer-events: auto; }
.day-box { background: linear-gradient(90deg, var(--primary), var(--secondary)); padding: 6px 20px; border-radius: 10px; font-weight: 700; font-size: 1rem; }

/* Screens */
.screen { position: absolute; inset: 0; display: none; background-size: cover; background-position: center; flex-direction: column; }
.active { display: flex; }

/* Lobby */
#lobby { background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤lobby.jpg') center/cover; align-items: center; justify-content: center; }
.play-btn { width: 140px; height: 140px; border-radius: 50%; border: 4px solid #fff; background: rgba(255, 45, 85, 0.2); color: #fff; font-size: 1.5rem; font-weight: 700; cursor: pointer; backdrop-filter: blur(8px); animation: pulse 2s infinite; }

/* Map Markers */
#map-screen { background: url('map.jpg') center/cover; }
.map-marker { position: absolute; width: 50px; height: 50px; border-radius: 50%; background: var(--primary); border: 3px solid #fff; display: flex; align-items: center; justify-content: center; font-weight: 800; cursor: pointer; box-shadow: 0 0 20px var(--primary); animation: float 1.5s infinite alternate; }

/* Choice Overlay */
#choice-screen { background-color: #000; justify-content: flex-end; padding-bottom: 80px; align-items: center; }
.choice-list { width: 90%; max-width: 480px; display: flex; flex-direction: column; gap: 12px; }
.btn-choice { background: rgba(0,0,0,0.8); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 18px; border-radius: 12px; cursor: pointer; text-align: left; font-size: 1rem; transition: 0.3s; backdrop-filter: blur(10px); }
.btn-choice:hover { background: var(--primary); transform: scale(1.02); }

/* Video & Call */
video { width: 100%; height: 100%; object-fit: cover; }
#call-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.9); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 2000; }
.call-pfp { width: 150px; height: 150px; border-radius: 50%; border: 4px solid #4cd964; margin-bottom: 20px; background: url('‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠.jpg') center/cover; }

/* Chat UI */
#chat-screen { background: #0b0c10; }
.chat-body { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; padding-bottom: 120px; }
.msg { padding: 10px 16px; border-radius: 18px; max-width: 80%; line-height: 1.5; font-size: 0.95rem; }
.msg.him { background: #1f2029; color: #fff; align-self: flex-start; border-bottom-left-radius: 4px; }
.msg.me { background: var(--primary); color: #fff; align-self: flex-end; border-bottom-right-radius: 4px; }
.chat-input-area { position: fixed; bottom: 0; width: 100%; background: #16171d; padding: 15px; display: none; flex-direction: column; gap: 10px; }

/* IG Profile */
#ig-screen { background: #000; }
.ig-card { height: 100%; display: flex; flex-direction: column; color: #fff; overflow-y: auto; }
.ig-header { padding: 20px; display: flex; align-items: center; gap: 20px; }
.ig-pfp { width: 80px; height: 80px; border-radius: 50%; background: url('‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏î‡∏≥.jpg') center/cover; border: 2px solid #333; }
.ig-btn { flex: 1; padding: 8px; border-radius: 5px; border: none; font-weight: 600; cursor: pointer; }

/* Animations */
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 45, 85, 0.5); } 70% { box-shadow: 0 0 0 20px rgba(255, 45, 85, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 45, 85, 0); } }
@keyframes float { from { transform: translateY(0); } to { transform: translateY(-10px); } }
@keyframes fadeUp { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }

</style>
</head>
<body>

<div id="fadeLayer"></div>
<div id="narration"><div class="narr-text" id="narrText"></div></div>

<div id="topUI">
    <div id="timeline">
        <div class="tl-step" id="tl-1">DAY 01 - ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
        <div class="tl-step" id="tl-2">DAY 02 - ‡πÇ‡∏î‡∏°‡∏Å‡∏µ‡∏¨‡∏≤</div>
    </div>
    <div id="globalStatus">
        <div class="day-box" id="dayLabel">DAY 01</div>
    </div>
</div>

<div id="lobby" class="screen active">
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="letter-spacing: 10px; font-weight: 200; font-size: 2.5rem; margin: 0;">LOMNUER</h1>
        <p style="color: var(--primary); font-size: 0.7rem;">LOVE LOVE MYSTERY CLUB</p>
    </div>
    <button class="play-btn" onclick="startGame()">START</button>
</div>

<div id="map-screen" class="screen">
    <div id="marker-b1" class="map-marker" style="top:50%; left:40%;" onclick="showProfile('‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠','‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠.jpg','‡∏ä‡∏≠‡∏ö‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏•‡∏Å ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á B1', startDay1)">B1</div>
    <div id="marker-dome" class="map-marker" style="top:65%; left:55%; display:none; background:var(--secondary);" onclick="showProfile('‡πÇ‡∏î‡∏°‡∏Å‡∏µ‡∏¨‡∏≤','‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÇ‡∏î‡∏°.jpg','‡∏à‡∏∏‡∏î‡∏ô‡∏±‡∏î‡∏û‡∏ö‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ö‡∏≠‡∏Å', startDay2)">D</div>
</div>

<div id="video-screen" class="screen">
    <video id="vPlayer" playsinline></video>
    <div id="call-overlay">
        <div class="call-pfp"></div>
        <h2 style="margin:0;">‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠</h2>
        <p style="color:#888;">Incoming Video Call...</p>
        <div style="display:flex; gap:40px; margin-top:30px;">
            <button onclick="answerCall()" style="width:70px; height:70px; border-radius:50%; background:#4cd964; border:none; color:white; font-size:1.5rem;">üìû</button>
            <button onclick="location.reload()" style="width:70px; height:70px; border-radius:50%; background:#ff3b30; border:none; color:white; font-size:1.5rem;">‚úï</button>
        </div>
    </div>
</div>

<div id="choice-screen" class="screen">
    <div class="choice-list" id="choiceList"></div>
</div>

<div id="chat-screen" class="screen">
    <div style="padding:15px; background:#1a1b22; display:flex; align-items:center; border-bottom:1px solid #333;">
        <div id="chatPfp" style="width:40px; height:40px; border-radius:50%; background-size:cover; margin-right:12px;"></div>
        <div id="chatName" style="font-weight:600;">---</div>
    </div>
    <div class="chat-body" id="chatBox"></div>
    <div id="chatInputArea" class="chat-input-area"></div>
</div>

<div id="ig-screen" class="screen">
    <div class="ig-card">
        <div style="padding:15px; text-align:center; font-weight:700; border-bottom:1px solid #222;">dammaybe</div>
        <div class="ig-header">
            <div class="ig-pfp"></div>
            <div style="flex:1; display:flex; justify-content:space-around; text-align:center;">
                <div><b>12</b><br><small>Posts</small></div>
                <div><b>8.4K</b><br><small>Followers</small></div>
                <div><b>150</b><br><small>Following</small></div>
            </div>
        </div>
        <div style="padding:0 20px;">
            <b>‡∏ô‡πâ‡∏≥‡∏ä‡∏≤ (‡∏î‡∏≥)</b><br>
            <span style="color:#aaa;">Engineering Student ‚öôÔ∏è | Smart is Sexy.<br>‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡∏ó‡∏µ‡πà "‡∏î‡∏≥"</span>
        </div>
        <div style="display:flex; gap:10px; padding:20px;">
            <button class="ig-btn" style="background:#0095f6; color:#fff;">Follow</button>
            <button class="ig-btn" style="background:#333; color:#fff;" onclick="startIGChat()">Message</button>
        </div>
        <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:2px;">
            <div style="aspect-ratio:1/1; background:url('‡∏î‡∏≥.jpg') center/cover;"></div>
            <div style="aspect-ratio:1/1; background:url('‡∏î‡∏≥8.jpg') center/cover;"></div>
            <div style="aspect-ratio:1/1; background:url('‡∏°‡∏∂‡∏á‡∏î‡∏≥.jpg') center/cover;"></div>
        </div>
    </div>
</div>

<audio id="sndMsg" src="https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3"></audio>

<script>
const v = document.getElementById('vPlayer');
const f = document.getElementById('fadeLayer');
const nar = document.getElementById('narration');
const msgSnd = document.getElementById('sndMsg');

let currentDay = 1;

// --- SYSTEM ---
function goTo(id, callback) {
    f.style.opacity = '1';
    setTimeout(() => {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        const topUI = document.getElementById('topUI');
        if (id === 'map-screen') {
            topUI.style.display = 'flex';
            document.getElementById('tl-' + currentDay).classList.add('active');
            document.getElementById('dayLabel').innerText = "DAY 0" + currentDay;
        } else { topUI.style.display = 'none'; }
        if (callback) callback();
        f.style.opacity = '0';
    }, 600);
}

function showNarration(text, cb) {
    document.getElementById('narrText').innerText = text;
    nar.style.display = 'flex';
    setTimeout(() => { nar.style.display = 'none'; if(cb) cb(); }, 3500);
}

function showProfile(name, pfp, bio, onStart) {
    // ‡πÉ‡∏ä‡πâ Prompt ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Modal
    if(confirm(`${name}\n${bio}\n\n‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) onStart();
}

function startGame() { goTo('map-screen'); }

// --- DAY 01 FLOW ---
function startDay1() {
    goTo('video-screen', () => {
        v.src = "‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏£‡∏ß‡∏°‡∏≠‡∏¥‡∏ô‡πÇ‡∏ó‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°.mp4";
        v.play();
        v.onended = () => {
            setChoices('‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á‡∏â‡∏≤‡∏Å‡πÅ‡∏£‡∏Å‡∏ï‡∏≠‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å.jpg', [
                { text: "üì± ‡∏ó‡∏±‡∏Å LINE ‡πÑ‡∏õ‡∏´‡∏≤‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", action: chatLomDay1 },
                { text: "üëä ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏Å‡∏£‡∏∞‡∏ó‡∏∑‡∏ö‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", action: () => { alert("‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏∏‡∏Å!"); location.reload(); } }
            ]);
        };
    });
}

function chatLomDay1() {
    goTo('chat-screen', async () => {
        setupChat('‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠', '‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠.jpg');
        await addMsg('him', '‡∏ß‡πà‡∏≤‡πÑ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ó‡∏±‡∏Å‡∏°‡∏≤‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏à‡∏±‡∏á');
        await addMsg('me', '‡∏´‡∏¢‡∏Å‡πÄ‡∏≠‡∏á‡∏ô‡∏∞ ‡∏ó‡∏µ‡πà‡πÅ‡∏≠‡∏ö‡∏°‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ');
        await addMsg('him', '‡∏≠‡πã‡∏≠‡∏≠ ‡∏ô‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏Å‡∏°‡∏≤‡∏ã‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡πÄ‡∏ô‡∏µ‡πà‡∏¢');
        showChatOptions([
            { t: "‡∏Å‡πá‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏Å‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏Ñ‡∏∞", next: () => endDay1("‡πÄ‡∏Ç‡∏¥‡∏ô‡∏à‡∏±‡∏á‡∏Ñ‡∏£‡∏±‡∏ö.. ‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏´‡∏≤‡∏ú‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏°‡∏ô‡∏∞") },
            { t: "‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏á", next: () => endDay1("‡∏á‡∏±‡πâ‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏ú‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏°‡∏ô‡∏∞ ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå") }
        ]);
    });
}

function endDay1(reply) {
    addMsg('him', reply).then(() => {
        setTimeout(() => {
            showNarration("‡∏à‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1... ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡πà‡∏≠‡∏ï‡∏±‡∏ß", () => {
                currentDay = 2;
                document.getElementById('marker-b1').style.display = 'none';
                document.getElementById('marker-dome').style.display = 'flex';
                goTo('map-screen');
            });
        }, 1500);
    });
}

// --- DAY 02 FLOW (REVISED AS REQUESTED) ---
function startDay2() {
    // ‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å
    goTo('video-screen', () => {
        v.src = "‡∏â‡∏≤‡∏Å‡πÅ‡∏£‡∏Å ‡∏ñ‡∏≤‡∏°‡∏•‡∏°‡∏î‡∏µ‡∏°‡∏±‡πâ‡∏¢.mp4";
        v.play();
        v.onended = () => {
            // ‡∏à‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏£‡∏Å ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏†‡∏≤‡∏û ‡∏•‡∏°‡∏ô‡∏¥‡πà‡∏á.jpg
            setChoices('‡∏•‡∏°‡∏ô‡∏¥‡πà‡∏á.jpg', [
                { text: "1. ‡∏ñ‡∏≤‡∏°‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏Ø", action: askScience },
                { text: "2. ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏î‡∏≥ ‡πÅ‡∏ó‡∏ô ‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠", action: talkToDam }
            ]);
        };
    });
}

// ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1: ‡∏ñ‡∏≤‡∏°‡∏•‡∏°
function askScience() {
    goTo('video-screen', () => {
        v.src = "‡∏•‡∏°‡πÇ‡∏á‡πà.mp4";
        v.play();
        v.onended = () => {
            // ‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û ‡∏°‡∏∂‡∏á‡∏î‡∏≥.jpg
            setChoices('‡∏°‡∏∂‡∏á‡∏î‡∏≥.jpg', [
                { text: "1. ‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ‡∏î‡∏≥‡∏ï‡∏£‡∏á‡πÜ ‡πÄ‡∏•‡∏¢", action: () => getDamIG("‡∏ï‡∏£‡∏á‡πÜ ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏≠‡∏à‡∏µ") },
                { text: "2. ‡πÉ‡∏´‡πâ‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ‡πÉ‡∏´‡πâ", action: () => getDamIG("‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡∏´‡∏ô‡πà‡∏≠‡∏¢") }
            ]);
            showNarration("‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ï‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢.. ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏≤‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡πÅ‡∏Æ‡∏∞");
        };
    });
}

// ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2: ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏î‡∏≥
function talkToDam() {
    goTo('video-screen', () => {
        v.src = "‡πÑ‡∏≠‡πâ‡∏î‡∏≥11.mp4";
        v.play();
        v.onended = () => {
            // ‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û ‡∏î‡∏≥8.jpg
            goTo('choice-screen', () => {
                document.getElementById('choice-screen').style.backgroundImage = "url('‡∏î‡∏≥8.jpg')";
                showNarration("‡πÄ‡∏Å‡πà‡∏á‡∏à‡∏±‡∏á‡πÄ‡∏•‡∏¢‡∏ô‡∏≤‡∏¢‡πÄ‡∏ô‡∏µ‡πà‡∏¢ ‡∏î‡∏≥‡πÅ‡∏ï‡πà‡∏Å‡πá‡πÄ‡∏Å‡πà‡∏á‡∏ô‡∏∞", () => {
                    renderChoices([
                        { text: "1. ‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?", action: () => getDamIG("‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ ‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ‡πÑ‡∏ß‡πâ‡∏ï‡∏¥‡∏ß‡∏´‡∏ô‡πà‡∏≠‡∏¢") },
                        { text: "2. ‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏≥ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏≠‡πÑ‡∏≠‡∏à‡∏µ", action: gameOverDam }
                    ]);
                });
            });
        };
    });
}

function gameOverDam() {
    showNarration("‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏≤‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏î‡∏≥...", () => {
        alert("GAME OVER: ‡∏î‡∏≥ (‡∏ô‡πâ‡∏≥‡∏ä‡∏≤) ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏™‡∏µ‡∏ú‡∏¥‡∏ß‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏°‡∏≤‡∏Å ‡πÄ‡∏Ç‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏π‡∏î‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô");
        location.reload();
    });
}

function getDamIG(reason) {
    showNarration("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÑ‡∏≠‡∏à‡∏µ‡∏Ç‡∏≠‡∏á‡∏î‡∏≥‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß!", () => {
        goTo('ig-screen');
    });
}

// --- IG CHAT (FINAL) ---
async function startIGChat() {
    goTo('chat-screen', async () => {
        setupChat('dammaybe', '‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏î‡∏≥.jpg');
        await addMsg('him', '‡πÑ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ó‡∏±‡∏Å‡∏°‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏î‡πâ‡∏ß‡∏¢');
        await addMsg('me', '‡∏Å‡πá‡∏Ñ‡∏ô‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ô‡∏µ‡πà‡∏ô‡∏≤');
        await addMsg('him', '‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ‡∏ä‡∏°‡∏ß‡πà‡∏≤‡∏ú‡∏°‡πÄ‡∏Å‡πà‡∏á ‡πÄ‡∏Ç‡∏¥‡∏ô‡∏ô‡∏∞‡πÄ‡∏ô‡∏µ‡πà‡∏¢');
        await addMsg('me', '‡∏Å‡πá‡πÄ‡∏Å‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∞ ‡∏•‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ‡πÄ‡∏•‡∏¢');
        await addMsg('him', '‡∏£‡∏≤‡∏¢‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤‡∏™‡∏≤‡∏¢‡πÄ‡∏Å‡∏°‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏°‡∏±‡∏ô‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£');
        await addMsg('him', '‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà.. ‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ô‡∏â‡∏•‡∏≤‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ô‡∏ï‡∏•‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö?');
        
        showChatOptions([
            { t: "‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ô‡∏â‡∏•‡∏≤‡∏î‡πÅ‡∏ö‡∏ö‡∏î‡∏≥‡∏Ñ‡πà‡∏∞", next: async () => {
                await addMsg('him', '‡∏á‡∏±‡πâ‡∏ô‡∏ú‡∏°‡∏Ñ‡∏á‡∏°‡∏µ‡∏•‡∏∏‡πâ‡∏ô‡∏™‡∏¥‡πÄ‡∏ô‡∏µ‡πà‡∏¢');
                await addMsg('me', '‡πÑ‡∏°‡πà‡πÅ‡∏Ñ‡πà‡∏•‡∏∏‡πâ‡∏ô‡∏´‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏∞ ‡∏à‡∏µ‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢');
                finishGame();
            }},
            { t: "‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ô‡∏ï‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏â‡∏•‡∏≤‡∏î‡πÅ‡∏ö‡∏ö‡∏î‡∏≥‡∏Ñ‡πà‡∏∞", next: async () => {
                await addMsg('him', '‡πÇ‡∏•‡∏†‡∏ô‡∏∞‡πÄ‡∏£‡∏≤‡πÄ‡∏ô‡∏µ‡πà‡∏¢ 555');
                await addMsg('me', '‡∏Å‡πá‡∏Ç‡∏≠‡∏á‡∏î‡∏µ‡πÉ‡∏Ñ‡∏£‡πÜ ‡∏Å‡πá‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ');
                finishGame();
            }}
        ]);
    });
}

function finishGame() {
    setTimeout(() => {
        showNarration("Day 02 Clear! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ä‡∏≤‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡∏Ç‡∏±‡πâ‡∏ô", () => {
            alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏ö Day 2 ‡∏Ç‡∏≠‡∏á Love Love Mystery Club ‡πÅ‡∏•‡πâ‡∏ß");
            location.reload();
        });
    }, 3000);
}

// --- UTILS ---
function setChoices(bg, list) {
    goTo('choice-screen', () => {
        document.getElementById('choice-screen').style.backgroundImage = `linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${bg}')`;
        renderChoices(list);
    });
}

function renderChoices(list) {
    const el = document.getElementById('choiceList');
    el.innerHTML = '';
    list.forEach(item => {
        const b = document.createElement('button');
        b.className = 'btn-choice';
        b.innerText = item.text;
        b.onclick = item.action;
        el.appendChild(b);
    });
}

function setupChat(name, pfp) {
    document.getElementById('chatName').innerText = name;
    document.getElementById('chatPfp').style.backgroundImage = `url('${pfp}')`;
    document.getElementById('chatBox').innerHTML = '';
}

async function addMsg(side, text) {
    const box = document.getElementById('chatBox');
    const d = document.createElement('div');
    d.style.display = 'flex';
    d.style.justifyContent = side === 'me' ? 'flex-end' : 'flex-start';
    d.innerHTML = `<div class="msg ${side}">${text}</div>`;
    box.appendChild(d);
    msgSnd.currentTime = 0; msgSnd.play().catch(()=>{});
    box.scrollTop = box.scrollHeight;
    await new Promise(r => setTimeout(r, 1500));
}

function showChatOptions(opts) {
    const area = document.getElementById('chatInputArea');
    area.innerHTML = '';
    opts.forEach(o => {
        const b = document.createElement('button');
        b.className = 'btn-choice';
        b.style.fontSize = '0.9rem';
        b.innerText = o.t;
        b.onclick = () => { area.style.display = 'none'; addMsg('me', o.t).then(o.next); };
        area.appendChild(b);
    });
    area.style.display = 'flex';
}
</script>
</body>
</html>

